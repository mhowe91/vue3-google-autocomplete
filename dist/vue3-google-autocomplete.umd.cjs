(function(l,a){typeof exports=="object"&&typeof module<"u"?a(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],a):(l=typeof globalThis<"u"?globalThis:l||self,a(l.VueGoogleAutocomplete={},l.Vue))})(this,function(l,a){"use strict";const w=["placeholder"],k=a.defineComponent({__name:"GoogleAutocomplete",props:{apiKey:{type:String,required:!0},class:{type:String,default:""},fields:{type:Array,default:()=>["place_id","formatted_address","address_components","geometry","name","rating","reviews","formatted_phone_number","user_ratings_total","website"]},isFullPayload:{type:Boolean,default:!1},modelValue:{type:String,default:""},placeholder:{type:String,default:""},types:{type:Array,default:()=>[]}},emits:["update:modelValue","set"],setup(r,{emit:A}){const u=A,i=r,c=a.ref(),e=a.ref(),p=a.ref(!1),P=()=>new Promise((s,n)=>{if(window.google&&window.google.maps&&window.google.maps.places)s();else if(!p.value){p.value=!0;const o=document.createElement("script");o.setAttribute("src",`https://maps.googleapis.com/maps/api/js?key=${i.apiKey}&libraries=places&v=weekly&callback=initMap`),window.initMap=()=>{s()},o.onerror=async d=>{n(d)},document.head.appendChild(o)}}),S=()=>{if(c.value){const s=google.maps.places,n=new s.Autocomplete(c.value,{fields:i.fields,types:i.types,strictBounds:!1});n.addListener("place_changed",async()=>{var m,y,g,h,b;e.value=await n.getPlace();const o=await e.value.geometry.location.lat(),d=await e.value.geometry.location.lng();let _="",v="",f="";for(const t of(m=e.value)==null?void 0:m.address_components)t.types.includes("locality")?_=await t.long_name:t.types.includes("administrative_area_level_1")?v=await t.long_name:t.types.includes("country")&&(f=await t.long_name);const M={name:(y=e.value)==null?void 0:y.name,city:_,state:v,country:f,latitude:o,longitude:d,rating:e.value.rating||null,reviews:e.value.reviews||[],phone_number:e.value.formatted_phone_number||"",international_phone_number:e.value.international_phone_number||"",website:e.value.website||"",opening_hours:e.value.opening_hours||null,secondary_opening_hours:e.value.secondary_opening_hours||null,address:e.value.formatted_address||"",adr_address:e.value.adr_address||"",photos:e.value.photos||[],price_level:e.value.price_level||null,user_ratings_total:e.value.user_ratings_total||null,url:e.value.url||"",business_status:e.value.business_status||null,curbside_pickup:e.value.curbside_pickup||!1,delivery:e.value.delivery||!1,dine_in:e.value.dine_in||!1,editorial_summary:((g=e.value.editorial_summary)==null?void 0:g.overview)||"",wheelchair_accessible_entrance:e.value.wheelchair_accessible_entrance||!1,icon:e.value.icon||"",icon_background_color:e.value.icon_background_color||"",icon_mask_base_uri:e.value.icon_mask_base_uri||"",place_id:e.value.place_id||"",types:e.value.types||[],vicinity:e.value.vicinity||"",serves_beer:e.value.serves_beer||!1,serves_breakfast:e.value.serves_breakfast||!1,serves_brunch:e.value.serves_brunch||!1,serves_dinner:e.value.serves_dinner||!1,serves_lunch:e.value.serves_lunch||!1,serves_vegetarian_food:e.value.serves_vegetarian_food||!1,serves_wine:e.value.serves_wine||!1,takeout:e.value.takeout||!1,reservable:e.value.reservable||!1,plus_code:((h=e.value.plus_code)==null?void 0:h.global_code)||"",utc_offset:e.value.utc_offset||null};u("update:modelValue",(b=e.value)==null?void 0:b.name),i.isFullPayload?u("set",e.value):u("set",M)})}};return a.onMounted(async()=>{try{await P(),await a.nextTick(),S()}catch(s){console.error("Failed to load Google Maps API",s)}}),a.onBeforeUnmount(()=>{delete window.initMap}),(s,n)=>(a.openBlock(),a.createElementBlock("input",{ref_key:"origin",ref:c,type:"text",class:a.normalizeClass(r.class),placeholder:r.placeholder},null,10,w))}});l.GoogleAutocomplete=k,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
